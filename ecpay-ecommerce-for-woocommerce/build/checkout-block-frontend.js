(()=>{"use strict";const e=window.React,a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"ecpay-invoice-block/invoice-fields","version":"1.0.0","title":"ECPay Woocommerce Invoice Block","category":"woocommerce","parent":["woocommerce/checkout-contact-information-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}}},"textdomain":"ecpay-invoice-block","editorScript":"file:./build/index.js"}'),i=window.wp.components,o=(window.wp.i18n,window.wp.element),{registerCheckoutBlock:t}=wc.blocksCheckout;t({metadata:a,component:({children:a,checkoutExtensionData:t})=>{const{setExtensionData:l,getExtensionData:c}=t,[n,r]=(0,o.useState)("p"),[v,u]=(0,o.useState)("0"),[s,b]=(0,o.useState)([{label:"索取紙本",value:"0"},{label:"雲端發票(中獎寄送紙本)",value:"1"},{label:"自然人憑證",value:"2"},{label:"手機條碼",value:"3"}]),[d,p]=(0,o.useState)(""),[m,_]=(0,o.useState)(""),[h,k]=(0,o.useState)(""),[y,w]=(0,o.useState)("");let g="";(0,o.useEffect)((()=>{null!==InvoiceData.DonateCode&&(g=InvoiceData.DonateCode,k(g),l("ecpay-invoice-block","invoice_love_code",g))}),[]);const C=(e,a)=>{"invoice_type"===e&&(u("0"),l("ecpay-invoice-block","invoice_carruer_type","0"),b("c"===a?[{label:"索取紙本",value:"0"},{label:"雲端發票(中獎寄送紙本)",value:"1"},{label:"手機條碼",value:"3"}]:"p"===a?[{label:"索取紙本",value:"0"},{label:"雲端發票(中獎寄送紙本)",value:"1"},{label:"自然人憑證",value:"2"},{label:"手機條碼",value:"3"}]:[])),p(""),_(""),k(g),w(""),l("ecpay-invoice-block","invoice_customer_company",g),l("ecpay-invoice-block","invoice_customer_identifier",g),l("ecpay-invoice-block","invoice_love_code",g),l("ecpay-invoice-block","invoice_carruer_num",g)},f=(0,o.useCallback)(((e,a)=>{switch(a){case"invoice_type":r(e),C(a,e);break;case"invoice_carruer_type":u(e),C(a,e);break;case"invoice_customer_company":p(e);break;case"invoice_customer_identifier":_(e);break;case"invoice_love_code":k(e);break;case"invoice_carruer_num":w(e)}l("ecpay-invoice-block",a,e)}),[r,u,p,_,k,w,l]);return(0,e.createElement)("div",{className:"ecpay_invoice_fields"},(0,e.createElement)(i.SelectControl,{label:"發票開立",value:n,options:[{label:"個人",value:"p"},{label:"公司",value:"c"},{label:"捐贈",value:"d"}],onChange:e=>f(e,"invoice_type"),required:!0,style:{height:"3rem"}}),"d"!==n&&(0,e.createElement)(i.SelectControl,{label:"載具類型",value:v,options:[...s],onChange:e=>f(e,"invoice_carruer_type"),required:!0,style:{height:"3rem"}}),"c"===n&&(0,e.createElement)(i.TextControl,{label:"公司行號",value:d,onChange:e=>f(e,"invoice_customer_company"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),"c"===n&&(0,e.createElement)(i.TextControl,{label:"統一編號",value:m,onChange:e=>f(e,"invoice_customer_identifier"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),"d"===n&&(0,e.createElement)(i.TextControl,{label:"捐贈碼",value:h,onChange:e=>f(e,"invoice_love_code"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),("2"===v||"3"===v)&&(0,e.createElement)(i.TextControl,{label:"載具編號",value:y,onChange:e=>f(e,"invoice_carruer_num"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}))}})})();