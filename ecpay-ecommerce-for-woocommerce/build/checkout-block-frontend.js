(()=>{"use strict";const e=window.React,a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"ecpay-invoice-block/invoice-fields","version":"1.0.0","title":"ECPay Woocommerce Invoice Block","category":"woocommerce","parent":["woocommerce/checkout-contact-information-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}}},"textdomain":"ecpay-invoice-block","editorScript":"file:./build/index.js"}'),t=window.wp.components,l=(window.wp.i18n,window.wp.element),{registerCheckoutBlock:i}=wc.blocksCheckout;i({metadata:a,component:({children:a,checkoutExtensionData:i})=>{const{setExtensionData:o,getExtensionData:c}=i,[n,r]=(0,l.useState)("p"),[u,s]=(0,l.useState)("索取紙本"),[v,b]=(0,l.useState)([{label:"索取紙本",value:"1"},{label:"雲端發票(中獎寄送紙本)",value:"2"},{label:"自然人憑證",value:"3"},{label:"手機條碼",value:"4"}]),[d,m]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[_,k]=(0,l.useState)(""),[w,y]=(0,l.useState)("");let g="";(0,l.useEffect)((()=>{null!==InvoiceData.DonateCode&&(g=InvoiceData.DonateCode,k(g),o("ecpay-invoice-block","invoice_love_code",g))}),[]);const C=e=>{"invoice_carruer_type"!==e&&(b("c"===n?[{label:"索取紙本",value:"1"},{label:"雲端發票(中獎寄送紙本)",value:"2"},{label:"手機條碼",value:"4"}]:"p"===n?[{label:"索取紙本",value:"1"},{label:"雲端發票(中獎寄送紙本)",value:"2"},{label:"自然人憑證",value:"3"},{label:"手機條碼",value:"4"}]:[]),s("1")),m(""),h(""),k(g),y("")},f=(0,l.useCallback)(((e,a)=>{switch(a){case"invoice_type":r(e),C(a);break;case"invoice_carruer_type":s(e),C(a);break;case"invoice_customer_company":m(e);break;case"invoice_customer_identifier":h(e);break;case"invoice_love_code":k(e);break;case"invoice_carruer_num":y(e)}o("ecpay-invoice-block",a,e)}),[r,s,m,h,k,y,o]);return(0,e.createElement)("div",{className:"ecpay_invoice_fields"},(0,e.createElement)(t.SelectControl,{label:"發票開立",value:n,options:[{label:"個人",value:"p"},{label:"公司",value:"c"},{label:"捐贈",value:"d"}],onChange:e=>f(e,"invoice_type"),required:!0,style:{height:"3rem"}}),"d"!==n&&(0,e.createElement)(t.SelectControl,{label:"載具類型",value:u,options:[...v],onChange:e=>f(e,"invoice_carruer_type"),required:!0,style:{height:"3rem"}}),"c"===n&&(0,e.createElement)(t.TextControl,{label:"公司行號",value:d,onChange:e=>f(e,"invoice_customer_company"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),"c"===n&&(0,e.createElement)(t.TextControl,{label:"統一編號",value:p,onChange:e=>f(e,"invoice_customer_identifier"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),"d"===n&&(0,e.createElement)(t.TextControl,{label:"捐贈碼",value:_,onChange:e=>f(e,"invoice_love_code"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),("3"===u||"4"===u)&&(0,e.createElement)(t.TextControl,{label:"載具編號",value:w,onChange:e=>f(e,"invoice_carruer_num"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}))}})})();